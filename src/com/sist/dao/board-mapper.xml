<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.sist.dao.board-mapper"> <!--namespace는 package를 의미한다.  -->
	<insert id="boardInsert" parameterType="Board">
		<selectKey keyProperty="no" resultType="int" order="BEFORE" >
			SELECT NVL(MAX(no)+1, 1)) as no FROM mvcBoard
		</selectKey>
		insert into mvcBoard(no, name, subject, content, pwd, group_id)
		values(#{no}, #{name}, #{subject}, #{content}, #{pwd}, (SELECT NVL(MAX(no)+1, 1)) as no FROM mvcBoard));
		<!-- 
			#{no} ==> ?
			insert into mvcBoard(no, name, subject, content, pwd, group_id)
			values(?, ?, ?, ?, ?, (SELECT NVL(MAX(no)+1, 1)) as no FROM mvcBoard));
		 	
		 	ps.setInt(1, board.getNo());
		 	pst.setString(2);
		 	pst.setString(3);
		 	pst.setString(4);
		 	pst.setString(5);

		 -->
	
	</insert>
	<!--
		단일 데이터
		다중 데이터: Board, Map
		
		Map을 이용해서 page 나눈다.
		Beetween  1 and  10
				 11 	 20
	
	  -->
	
	<select id="boardListData" resultType="Board" parameterType="java.util.Map">
		select no, subject, name, regdate, hit, group_tab, num
		from (SELECT no, subject, name, regdate, hit, group_tab, rownum as num
			from(SELECT no, subject, name, regdate, hit, group_tab
				from mvcBoard order by group_id desc, group_step asc				
			)
		) where num between #{start} and #{end}
	</select>	

</mapper>
 